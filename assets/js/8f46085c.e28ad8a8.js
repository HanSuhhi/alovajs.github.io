"use strict";(self.webpackChunkalova_website=self.webpackChunkalova_website||[]).push([[1313],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=u(n),h=r,m=p["".concat(l,".").concat(h)]||p[h]||c[h]||s;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var u=2;u<s;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294),r=n(6010);const s="tabItem_Ymn6";function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(s,o),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(7462),r=n(7294),s=n(6010),o=n(2466),i=n(6550),l=n(1980),u=n(7392),d=n(12);function c(e){return function(e){var t;return(null==(t=r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:t.filter(Boolean))??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function p(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.k6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(a.location.search);t.set(s,e),a.replace({...a.location,search:t.toString()})}),[s,a])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,s=p(e),[o,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s}))),[l,u]=m({queryString:n,groupId:a}),[c,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,s]=(0,d.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:a}),v=(()=>{const e=l??c;return h({value:e,tabValues:s})?e:null})();(0,r.useLayoutEffect)((()=>{v&&i(v)}),[v]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),f(e)}),[u,f,s]),tabValues:s}}var v=n(2389);const g="tabList__CuJ",b="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:u}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),p=e=>{const t=e.currentTarget,n=d.indexOf(t),a=u[n].value;a!==i&&(c(t),l(a))},h=e=>{var t;let n=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;n=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;n=d[t]??d[d.length-1];break}}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:o}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>d.push(e),onKeyDown:h,onClick:p},o,{className:(0,s.Z)("tabs__item",b,null==o?void 0:o.className,{"tabs__item--active":i===t})}),n??t)})))}function k(e){let{lazy:t,children:n,selectedValue:a}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},s.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function q(e){const t=f(e);return r.createElement("div",{className:(0,s.Z)("tabs-container",g)},r.createElement(y,(0,a.Z)({},e,t)),r.createElement(k,(0,a.Z)({},e,t)))}function w(e){const t=(0,v.Z)();return r.createElement(q,(0,a.Z)({key:String(t)},e))}},1394:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>u,toc:()=>c});var a=n(7462),r=(n(7294),n(3905)),s=n(4866),o=n(5162);const i={title:"Send request",sidebar_position:30},l=void 0,u={unversionedId:"learning/use-request",id:"learning/use-request",title:"Send request",description:"Next, let's take a look at how to actually send the request. In alova, there are three use hooks useRequest, useWatcher, and useFetcher to implement the timing of the request. They control when the request should be sent, and at the same time It will create and maintain stateful request-related data for us, such as loading, data, error, etc. There is no need to maintain these states independently. Let's understand them below.",source:"@site/docs/03-learning/03-use-request.md",sourceDirName:"03-learning",slug:"/learning/use-request",permalink:"/learning/use-request",draft:!1,editUrl:"https://github.com/alovajs/alovajs.github.io/blob/main/docs/03-learning/03-use-request.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{title:"Send request",sidebar_position:30},sidebar:"tutorialSidebar",previous:{title:"Request method instance",permalink:"/learning/method-instance"},next:{title:"Status Change Request",permalink:"/learning/use-watcher"}},d={},c=[{value:"Initial data request",id:"initial-data-request",level:2},{value:"Binding request callback",id:"binding-request-callback",level:2},{value:"Manually send the request",id:"manually-send-the-request",level:2},{value:"Force send request",id:"force-send-request",level:2},{value:"Set static value",id:"set-static-value",level:3},{value:"Dynamically set the force value",id:"dynamically-set-the-force-value",level:3},{value:"Send function parameter passing rules",id:"send-function-parameter-passing-rules",level:2},{value:"Receive in the useRequest callback function",id:"receive-in-the-userequest-callback-function",level:3},{value:"Received in onSuccess, onError, onComplete callback functions",id:"received-in-onsuccess-onerror-oncomplete-callback-functions",level:3},{value:"Received in the force function",id:"received-in-the-force-function",level:3},{value:"Set initial response data",id:"set-initial-response-data",level:2},{value:"Manually modify the status value",id:"manually-modify-the-status-value",level:2},{value:"Manual interrupt request",id:"manual-interrupt-request",level:2}],p={toc:c};function h(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Next, let's take a look at how to actually send the request. In ",(0,r.kt)("inlineCode",{parentName:"p"},"alova"),", there are three use hooks ",(0,r.kt)("inlineCode",{parentName:"p"},"useRequest"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"useWatcher"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"useFetcher")," to implement the timing of the request. They control when the request should be sent, and at the same time It will create and maintain stateful request-related data for us, such as ",(0,r.kt)("inlineCode",{parentName:"p"},"loading"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"data"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"error"),", etc. There is no need to maintain these states independently. Let's understand them below."),(0,r.kt)("p",null,"This time we first understand the first use hook, ",(0,r.kt)("strong",{parentName:"p"},"useRequest"),", which means sending a request. When ",(0,r.kt)("inlineCode",{parentName:"p"},"useRequest")," is executed, a request will be sent by default. It is the most commonly used method when obtaining initial data on the page, and it also supports Turn off its default request sending, which is very useful in request scenarios triggered by click events such as submitting data."),(0,r.kt)("h2",{id:"initial-data-request"},"Initial data request"),(0,r.kt)("p",null,"Let's get the page data for the todo list."),(0,r.kt)(s.Z,{groupId:"framework",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"1",label:"vue",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<template>\n  \x3c!-- You can directly use data to render the todo list --\x3e\n  <div v-if="loading">Loading...</div>\n  <div\n    v-else-if="error"\n    class="error">\n    {{ error. message }}\n  </div>\n  <template v-else>\n    <div v-for="todo in data">\n      <div class="todo-title">{{ todo.title }}</div>\n      <div class="todo-time">{{ todo.time }}</div>\n    </div>\n  </template>\n</template>\n\n<script setup>\n  const {\n    // loading is the loading status value, when it is loaded, its value is true, and it is automatically updated to false after the end\n    // It is a value of type Ref, you can access it through loading.value, or directly bind to the interface\n    loading,\n\n    // Response data, also Ref value\n    data,\n\n    // request error object, Ref value, there is a value when the request is wrong, otherwise it is undefined\n    error\n\n    // Directly pass in the Method instance to send the request\n  } = useRequest(todoListGetter, {\n    // Before the request responds, the initial value of data\n    initialData: []\n  });\n<\/script>\n'))),(0,r.kt)(o.Z,{value:"2",label:"react",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'const App = () => {\n  const {\n    // loading is the loading status value, when it is loaded, its value is true, and it is automatically updated to false after the end\n    // Its value is an ordinary boolean value, and the set function will be automatically called internally to update its value when the request state changes\n    loading,\n\n    // response data\n    data,\n\n    // request error object, there is a value when the request is wrong, otherwise it is undefined\n    error\n\n    // Directly pass in the Method instance to send the request\n  } = useRequest(todoListGetter, {\n    // Before the request responds, the initial value of data\n    initialData: []\n  });\n\n  // You can directly use todoList to render the todo list\n  if (loading) {\n    return <div>Loading...</div>;\n  } else if (error) {\n    return <div class="error">{error.message}</div>;\n  } else {\n    return (\n      <>\n        <div v-for="todo in data">\n          <div class="todo-title">{todo.title}</div>\n          <div class="todo-time">{todo.time}</div>\n        </div>\n      </>\n    );\n  }\n};\n'))),(0,r.kt)(o.Z,{value:"3",label:"svelte",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<script>\n  const {\n    // loading is the loading status value, when it is loaded, its value is true, and it is automatically updated to false after the end\n    // It is a value of Writable type, it will be maintained internally\n    loading,\n\n    // response data\n    data,\n\n    // request error object, there is a value when the request is wrong, otherwise it is undefined\n    error\n\n    // Directly pass in the Method instance to send the request\n  } = useRequest(todoListGetter, {\n    // Before the request responds, the initial value of data\n    initialData: []\n  });\n<\/script>\n\n\x3c!-- You can directly use todoList to render the todo list --\x3e\n{#if $loading}\n<div>Loading...</div>\n{:else if $error}\n<div class="error">{ $error. message }</div>\n{:else} {#each $data as todo}\n<div>\n  <div class="todo-title">{ todo. title }</div>\n  <div class="todo-time">{ todo.time }</div>\n</div>\n{/each} {/if}\n')))),(0,r.kt)("h2",{id:"binding-request-callback"},"Binding request callback"),(0,r.kt)("p",null,"To set the request callback, you can also receive the callback setting function in the return parameter of useRequest, as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const {\n  //...\n\n  // successful callback binding\n  onSuccess,\n\n  // failure callback binding\n  onError,\n\n  // Complete the callback binding, the callback will be called on success or failure\n  onComplete\n} = useRequest(todoListGetter);\nonSuccess(event => {\n  console.log('The request is successful, the response data is:', event.data);\n  console.log('The method instance of this request is:', event.method);\n  console.log('is the response data from cache:', event.fromCache);\n});\nonError(event => {\n  console.log('The request failed, the error message is:', event.error);\n  console.log('The method instance of this request is:', event.method);\n});\nonComplete(event => {\n  // event.status is success on success, error on failure\n  console.log('The request is completed, the status is:', event.status);\n  console.log('The method instance of this request is:', event.method);\n  console.log('is the response data from cache:', event.fromCache);\n  if (event.data) {\n    console.log('request data:', event.data);\n  } else if (event.error) {\n    console.log('Error message:', event.error);\n  }\n});\n")),(0,r.kt)("admonition",{title:"Note",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Throwing an error in ",(0,r.kt)("inlineCode",{parentName:"p"},"onSuccess")," will trigger ",(0,r.kt)("inlineCode",{parentName:"p"},"onError"))),(0,r.kt)("h2",{id:"manually-send-the-request"},"Manually send the request"),(0,r.kt)("p",null,"When you need to create a new todo item, you can turn off the default sending request first, switch to manually triggering the request, and receive the ",(0,r.kt)("inlineCode",{parentName:"p"},"send")," function in useRequest to manually send the request, and the ",(0,r.kt)("inlineCode",{parentName:"p"},"send")," function will return a Promise with response data Instance, it will change to resolve state after request response."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const {\n  //...\n  // Function for manual sender request, call to send request\n  send: addTodo\n} = useRequest(newTodo => alovaInstance.Post('/todo', newTodo), {\n  // When immediate is false, it is not emitted by default\n  immediate: false\n});\n\n// Manually send the request\nconst handleAddTodo = () => {\n  const newTodo = {\n    title: 'New todo item',\n    time: new Date().toLocaleString()\n  };\n  // The send function returns a Promise object that can receive the response data\n  addTodo(newTodo)\n    .then(result => {\n      console.log('The new todo item is successfully added, and the response data is:', result);\n    })\n    .catch(error => {\n      console.log('Failed to add todo item, the error message is:', error);\n    });\n};\n")),(0,r.kt)("h2",{id:"force-send-request"},"Force send request"),(0,r.kt)("p",null,"Caching data can improve application fluency and reduce server pressure, but there is also the problem of data expiration. When you want to penetrate the cache to obtain the latest data, you can set the ",(0,r.kt)("inlineCode",{parentName:"p"},"force")," property in the configuration of use hooks. help you."),(0,r.kt)("h3",{id:"set-static-value"},"Set static value"),(0,r.kt)("p",null,"force is false by default. When set to true, the cache will be penetrated every time and a request will be sent"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"useRequest(alovaInstance.Get('/todo'), {\n  force: true\n});\n")),(0,r.kt)("h3",{id:"dynamically-set-the-force-value"},"Dynamically set the force value"),(0,r.kt)("p",null,"In actual situations, we often need to set whether to force the request to be sent according to different situations. At this time, force can be set as a function, which can be passed in through the send function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { send } = useRequest(alovaInstance.Get('/todo'), {\n  force: id => {\n    return !!id;\n  }\n});\nsend(1);\n")),(0,r.kt)("h2",{id:"send-function-parameter-passing-rules"},"Send function parameter passing rules"),(0,r.kt)("p",null,"In the above example, the send function is called to manually trigger the request, which can accept any number of parameters, which will be received by the following 4 functions:"),(0,r.kt)("h3",{id:"receive-in-the-userequest-callback-function"},"Receive in the useRequest callback function"),(0,r.kt)("p",null,"It can be received when the first parameter of useRequest is set as a callback function, which is usually useful when deleting list items, as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { send } = useRequest(id => removeTodoPoster(id));\nsend(1); // id in the above callback function will receive 1\n")),(0,r.kt)("h3",{id:"received-in-onsuccess-onerror-oncomplete-callback-functions"},"Received in onSuccess, onError, onComplete callback functions"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"event.sendArgs")," in onSuccess, onError, and onComplete callback functions are received in the form of an array"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { send, onSuccess, onError, onComplete } = useRequest(newTodo => alovaInstance.Post('/todo', newTodo));\nonSuccess(event => {\n  // The value of sendArgs is [1]\n  console.log(event.sendArgs);\n});\nonError(event => {\n  // The value of sendArgs is [1]\n  console.log(event.sendArgs);\n});\nonComplete(event => {\n  // The value of sendArgs is [1]\n  console.log(event.sendArgs);\n});\n\n// send request\nsend(1);\n")),(0,r.kt)("h3",{id:"received-in-the-force-function"},"Received in the force function"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { send } = useRequest(alovaInstance.Get('/todo'), {\n  force: id => {\n    return !!id;\n  }\n});\nsend(1);\n")),(0,r.kt)("h2",{id:"set-initial-response-data"},"Set initial response data"),(0,r.kt)("p",null,"Before a page obtains the initial data, it inevitably needs to wait for the response from the server. Before the response, it is generally necessary to initialize the state to an empty array or an empty object, so as not to cause an error on the page. We can use the second in ",(0,r.kt)("inlineCode",{parentName:"p"},"useRequest")," parameter to set the initial data."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// Set initial data in useRequest\nconst {\n  // The initial value of data before the response is [], not undefined\n  // highlight-start\n  data\n} = useRequest(todoListGetter, {\n  initialData: []\n});\n// highlight-end\n")),(0,r.kt)("h2",{id:"manually-modify-the-status-value"},"Manually modify the status value"),(0,r.kt)("p",null,"In alova, various states such as ",(0,r.kt)("inlineCode",{parentName:"p"},"data"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"loading"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," returned by ",(0,r.kt)("inlineCode",{parentName:"p"},"useRequest")," allow custom modification, which will become very convenient in some cases."),(0,r.kt)(s.Z,{groupId:"framework",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"1",label:"vue",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { data, loading, error } = useRequest(todoListGetter);\n\n//...\n// Modify the data value directly\ndata.value = {};\n"))),(0,r.kt)(o.Z,{value:"2",label:"react",mdxType:"TabItem"},(0,r.kt)("p",null,"In react, the returned state is data that can be used directly, so it needs to be modified by the ",(0,r.kt)("inlineCode",{parentName:"p"},"update")," function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { data, loading, error, update } = useRequest(todoListGetter);\n\n//...\n// Modify the data value through update\nupdate({\n  data: {}\n});\n"))),(0,r.kt)(o.Z,{value:"3",label:"svelte",mdxType:"TabItem"},(0,r.kt)("p",null,"In svelte, the status returned by ",(0,r.kt)("inlineCode",{parentName:"p"},"useRequest")," is of type ",(0,r.kt)("inlineCode",{parentName:"p"},"writable"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { data, loading, error } = useRequest(todoListGetter);\n\n//...\n// Modify the data value directly\n$data = {};\n// or data.update(d => ({}));\n")))),(0,r.kt)("admonition",{title:"Notes",type:"caution"},(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},"The custom modified value will be overwritten by the internal state management mechanism of ",(0,r.kt)("inlineCode",{parentName:"li"},"useRequest"),", for example, when you modify the ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," value, the ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," value will be assigned the latest response data after requesting again;"),(0,r.kt)("li",{parentName:"ol"},"The state value modified directly will not modify the cached data synchronously. If you need to modify the cached data synchronously, it is recommended to use ",(0,r.kt)("a",{parentName:"li",href:"/learning/update-response-data-across-modules"},"updateState")))),(0,r.kt)("h2",{id:"manual-interrupt-request"},"Manual interrupt request"),(0,r.kt)("p",null,"When the ",(0,r.kt)("inlineCode",{parentName:"p"},"timeout")," parameter is not set, the request will never time out. If you need to manually interrupt the request, you can receive the ",(0,r.kt)("inlineCode",{parentName:"p"},"abort")," method when the ",(0,r.kt)("inlineCode",{parentName:"p"},"useRequest")," function is called."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const {\n  //...\n  // highlight-start\n  // abort function is used to interrupt request\n  abort\n  // highlight-end\n} = useRequest(todoListGetter);\n\n// highlight-start\n// Call abort to interrupt the request\nconst handleCancel = () => {\n  abort();\n};\n// highlight-end\n")))}h.isMDXComponent=!0}}]);